<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alespotify - Inicio</title>
    <link rel="stylesheet" href="../static/css/app.css">
    <link rel="stylesheet" th:href="@{/css/app.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
          integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
</head>
<body class="dark-mode">

<div id="modal-container" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center;">
    <div id="modal-content">
    </div>
</div>

<div th:id="${user.getId()}" th:email="${user.getEmail()}" th:image="${user.getImagen()}" th:name="${user.getName()}" style="display: none" id="user-data"></div>
<div class="sidebar">

    <div class="sidebar-content">
        <h2>Alespotify</h2>
        <nav>
            <a href="#" class="active">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                Inicio
            </a>
            <a href="#">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                Búsqueda
                <!-- TODO dynamic search ?? -->
            </a>
            <a href="#">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                    <line x1="8" y1="21" x2="16" y2="21"></line>
                    <line x1="12" y1="17" x2="12" y2="21"></line>
                </svg>
                Biblioteca
            </a>
        </nav>
    </div>
    <div class="separator"></div>
    <div class="sidebar-content">
        <h3>Tus listas de reproducción</h3>
        <nav id="playlists-nav">
            <a href="#">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.23l-1.06-.62a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                </svg>
               Canciones que te gustan
            </a>
            <a href="#">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                Canciones recientes
            </a>
            <a id="create-playlist-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                Crear Playlist
            </a>
        </nav>
    </div>
    <div class="sidebar-content" style="margin-top: auto;">
        <nav>
            <a onclick="openModal('profile')" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                Perfil
            </a>
            <a id="toggle-dark-mode">
                <svg stroke="currentColor"
                     stroke-width="2"
                     stroke-linecap="round" stroke-linejoin="round"
                     fill="none" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19,9a7,7,0,0,1-4,6.32V18H9V15.32A7,7,0,1,1,19,9Z"></path><line x1="9" y1="22" x2="15" y2="22"></line>
                     </svg>
                Cambiar modo</a>

            <a
                    href="/logout"
                    onclick="if (!confirm('Deseas cerrar sesión?')) return false">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                Cerrar sesión
            </a>
        </nav>
    </div>
</div>
<div class="main-content">
    <main>
        <div class="main-header">
            <h1 th:text="'Bienvenido, ' + ${user.getName()}"></h1>
            <div class="avatar">
                <img th:src="${user.getImagen()}" height="38" th:alt="${user.getName()}">
            </div>
        </div>
        <div class="bento-grid">
            <div class="card featured">
                <div class="absolute inset-0 bg-gradient-to-t z-10"></div>
                <img src="placeholder.svg?height=400&width=800" alt="Featured Playlist">
                <div class="card-content absolute bottom-0 left-0 z-20">
                    <h2>Weekly Discoveries</h2>
                    <p>Fresh music curated just for you</p>
                    <button class="play-button">Play Now</button>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h2>Recently Played</h2>
                </div>
                <div class="card-content" >
                    <div class="track-item">
                        <img src="placeholder.svg?height=48&width=48&text=1" alt="Track 1">
                        <div>
                            <p>Track Title 1</p>
                            <p>Artist Name</p>
                        </div>
                    </div>
                    <div class="track-item">
                        <img src="placeholder.svg?height=48&width=48&text=2" alt="Track 2">
                        <div>
                            <p>Track Title 2</p>
                            <p>Artist Name</p>
                        </div>
                    </div>
                    <div class="track-item">
                        <img src="placeholder.svg?height=48&width=48&text=3" alt="Track 3">
                        <div>
                            <p>Track Title 3</p>
                            <p>Artist Name</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h2>Los artistas más top</h2>
                </div>
                <div class="card-content top-artists" th:each="artist : ${artists}">
                    <div class="avatar">
                        <img th:src="${artist.getImage()}" th:alt="${artist.getName()}">
                    </div>
                    <p th:text="${artist.getName()}"></p>
                </div>

            </div>
        </div>
        <div class="made-for-you">
            <h2>Made For You</h2>
            <!-- playlists-->
            <div class="made-for-you-grid">
                <div class="card" th:each="playlist : ${playlists}">
                    <img th:src="${playlist.image}" th:alt="${playlist.nombre}">
                    <div>
                        <p th:text="${playlist.nombre}"></p>
                        <p th:text="${playlist.songs.size()} + ' canciones'" ></p>
                    </div>
                </div>
            </div>
        </div>
        <!-- FOREACH songs -->
        <div class="new-releases">
            <div class="new-releases-scroll">
                <h2>Nuevas entradas</h2>

                <div class="card" th:each="song : ${songs}" th:data-id="${song.getId()}"
                     th:onclick="getSong(this.getAttribute('data-id'))">
                    <img th:src="${song.getImage()}" th:alt="${song.name}">
                    <div>
                        <p th:text="${song.name}"></p>
                        <p th:text="${song.artists[0].getName()}"></p>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <div id="player" class="player">
        <audio src=""></audio>
        <div class="player-content">
            <div class="player-track">
                <img id="player_track_song" src="placeholder.svg?height=56&width=56" alt="Now Playing">
                <div>
                    <p id="current_track"></p>
                    <p id="current_artist"></p>
                </div>
                <button id="liked" class="like-song">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.23l-1.06-.62a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                </button>
            </div>
            <div class="player-controls" id="controls">
                <div class="player-controls-buttons">
                    <button>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="4 4 20 12 4 20"></polyline>
                            <line x1="20" y1="4" x2="20" y2="20"></line>
                        </svg>
                    </button>
                    <button>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="19 20 9 12 19 4"></polygon>
                            <line x1="5" y1="19" x2="5" y2="5"></line>
                        </svg>
                    </button>
                    <button style="border-radius: 50%; width: 40px; height: 40px; background-color: white; border: 1px solid black; display: flex; align-items: center; justify-content: center;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="6" y="4" width="4" height="16"></rect>
                            <rect x="14" y="4" width="4" height="16"></rect>
                        </svg>
                    </button>
                    <button>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="5 4 15 12 5 20"></polygon>
                            <line x1="19" y1="5" x2="19" y2="19"></line>
                        </svg>
                    </button>
                    <button>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V2"></path>
                            <polyline points="10 17 15 12 10 7"></polyline>
                            <polyline points="15 17 20 12 15 7"></polyline>
                        </svg>
                    </button>
                </div>
                <div id="trackbar" class="player-progress">
                    <span></span>
                    <input type="range" min="0" max="100" value="33">
                    <span></span>
                </div>
            </div>
            <div class="player-volume">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                    <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                    <path d="M19.07 4.93a9 9 0 0 1 0 14.14"></path>
                </svg>
                <input id="volume" type="range" min="0" max="100" value="50">
            </div>
        </div>
    </div>
</div>


</body>

<script type="text/javascript" th:src="@{../js/app.js}"></script>
</html>